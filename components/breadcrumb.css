/**
 * AURAL UI - Breadcrumb Component
 *
 * Navigation hierarchy showing user's location
 *
 * Usage:
 *   <nav class="breadcrumb" aria-label="Breadcrumb">
 *     <ol>
 *       <li><a href="/">Home</a></li>
 *       <li><a href="/products">Products</a></li>
 *       <li aria-current="page">Widget</li>
 *     </ol>
 *   </nav>
 */

.breadcrumb {
    /* Layout */
    display: flex;

    /* Accessibility */
    outline: none;

    & > ol,
    & > ul {
        /* Layout */
        display: flex;
        align-items: center;
        flex-wrap: wrap;
        gap: var(--space-2);

        /* Reset list styles */
        list-style: none;
        margin: 0;
        padding: 0;
    }

    & li {
        /* Layout */
        display: flex;
        align-items: center;
        gap: var(--space-2);

        /* Typography */
        font-family: var(--font-sans);
        font-size: var(--text-sm);
        line-height: var(--leading-normal);
    }

    & a {
        /* Appearance */
        color: var(--color-breadcrumb-link);
        text-decoration: none;
        transition: var(--transition-all-fast);

        /* Interaction */
        outline: none;

        &:hover {
            color: var(--color-breadcrumb-link-hover);
            text-decoration: underline;
        }

        &:focus-visible {
            outline: 2px solid var(--color-primary);
            outline-offset: 2px;
            border-radius: var(--radius-sm);
        }
    }

    & li[aria-current="page"] {
        color: var(--color-breadcrumb-current);
        font-weight: var(--font-medium);
    }

    /* Separator */
    & li:not(:last-child)::after {
        content: '/';
        color: var(--color-breadcrumb-separator);
        margin-left: var(--space-2);
        user-select: none;
    }
}

/* ========================================
   SEPARATOR VARIANTS
   ======================================== */

/* Chevron separator */
.breadcrumb-chevron {
    & li:not(:last-child)::after {
        content: '';
        width: 16px;
        height: 16px;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='rgba(255,255,255,0.3)'%3E%3Cpath fill-rule='evenodd' d='M6.22 4.22a.75.75 0 011.06 0l3.25 3.25a.75.75 0 010 1.06l-3.25 3.25a.75.75 0 01-1.06-1.06L8.94 8 6.22 5.28a.75.75 0 010-1.06z'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: center;
    }
}

/* Dash separator */
.breadcrumb-dash {
    & li:not(:last-child)::after {
        content: '—';
    }
}

/* Dot separator */
.breadcrumb-dot {
    & li:not(:last-child)::after {
        content: '•';
    }
}

/* Arrow separator */
.breadcrumb-arrow {
    & li:not(:last-child)::after {
        content: '→';
    }
}

/* ========================================
   SIZES
   ======================================== */

.breadcrumb-sm {
    & li {
        font-size: var(--text-xs);
    }

    & li:not(:last-child)::after {
        font-size: var(--text-xs);
    }
}

.breadcrumb-lg {
    & li {
        font-size: var(--text-base);
    }

    & li:not(:last-child)::after {
        font-size: var(--text-base);
    }

    & > ol,
    & > ul {
        gap: var(--space-3);
    }

    & li {
        gap: var(--space-3);
    }

    & li:not(:last-child)::after {
        margin-left: var(--space-3);
    }
}

/* ========================================
   COLLAPSED VARIANT
   ======================================== */

.breadcrumb-collapsed {
    & > ol,
    & > ul {
        & > li:not(:first-child):not(:last-child):not(.breadcrumb-expanded) {
            display: none;
        }

        & > li:nth-last-child(2)::before {
            content: '...';
            color: var(--color-breadcrumb-separator);
            margin-right: var(--space-2);
            cursor: pointer;
            padding: var(--space-1) var(--space-2);
            border-radius: var(--radius-sm);
            transition: var(--transition-all-fast);

            &:hover {
                background: var(--color-bg-hover);
            }
        }
    }

    &.breadcrumb-expanded {
        & > ol,
        & > ul {
            & > li {
                display: flex !important;
            }

            & > li:nth-last-child(2)::before {
                display: none;
            }
        }
    }
}

/* ========================================
   WITH ICONS
   ======================================== */

.breadcrumb-with-icons {
    & li {
        gap: var(--space-2);
    }

    & .breadcrumb-icon {
        width: 16px;
        height: 16px;
        flex-shrink: 0;
        color: currentColor;
    }
}

/* ========================================
   BACKGROUND VARIANT
   ======================================== */

.breadcrumb-bg {
    padding: var(--space-3) var(--space-4);
    background: rgba(255, 255, 255, 0.03);
    border-radius: var(--radius-md);
    border: 1px solid var(--color-border-subtle);
}

/* ========================================
   ACCESSIBILITY
   ======================================== */

/* Screen reader only text */
.breadcrumb-sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
    .breadcrumb a,
    .breadcrumb-collapsed & > ol > li:nth-last-child(2)::before {
        transition: none;
    }
}

/* ========================================
   TOUCH DEVICE OPTIMIZATIONS
   ======================================== */

/* Ensure breadcrumb links meet touch target size of 44x44px */
@media (pointer: coarse) {
    .breadcrumb a {
        min-height: 44px;
        padding: var(--space-3) var(--space-3);
        display: inline-flex;
        align-items: center;
    }

    /* Larger touch targets for collapsed breadcrumb expand button */
    .breadcrumb-collapsed & > ol > li:nth-last-child(2)::before {
        min-height: 44px;
        min-width: 44px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
    }

    /* Increase separator spacing on touch devices for better readability */
    .breadcrumb li:not(:last-child)::after {
        margin-left: var(--space-3);
    }

    /* Larger size variants for touch */
    .breadcrumb-sm a {
        min-height: 44px;
        padding: var(--space-2) var(--space-3);
    }
}
