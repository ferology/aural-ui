import { Canvas, Meta } from '@storybook/blocks';
import * as NotificationCenterStories from './NotificationCenter.stories';

<Meta of={NotificationCenterStories} />

# Notification Center

Centralized notification management with categorized alerts, read/unread states, and actionable items. The notification center provides a unified interface for displaying system notifications, user activity, and important updates.

## Overview

The Notification Center component displays a list of notifications with support for different types, states, and interactive actions. It's designed to keep users informed about important events without disrupting their workflow.

**Key Features:**
- Multiple notification types (success, error, warning, info)
- Read/unread state management
- Support for avatars and icons
- Inline action buttons
- Date grouping capabilities
- Empty state handling
- Load more pattern for pagination
- Theme-aware styling across all 9 Aural UI themes
- Full keyboard accessibility
- ARIA compliant

---

## Usage

<Canvas of={NotificationCenterStories.Default} />

### Vanilla JavaScript / HTML

```html
<!-- Basic notification center -->
<div class="aural-notification-center">
  <div class="aural-notification-center__header">
    <h3 class="aural-notification-center__title">Notifications</h3>
    <button class="btn btn-ghost btn-sm">
      <i data-lucide="settings"></i>
    </button>
  </div>
  <div class="aural-notification-center__list">
    <button class="aural-notification-center__item aural-notification-center__item--unread aural-notification-center__item--success">
      <div class="aural-notification-center__item-icon">
        <i data-lucide="check-circle"></i>
      </div>
      <div class="aural-notification-center__item-content">
        <div class="aural-notification-center__item-title">Build Successful</div>
        <div class="aural-notification-center__item-message">Your project built successfully</div>
        <div class="aural-notification-center__item-time">5 minutes ago</div>
      </div>
      <div class="aural-notification-center__item-dot"></div>
    </button>
  </div>
  <div class="aural-notification-center__footer">
    <a href="#" class="aural-notification-center__footer-link">View all notifications</a>
  </div>
</div>

<script>
// Initialize Aural UI components (if needed)
if (window.Aural) {
  window.Aural.initNotificationCenter();
}

// Initialize Lucide icons
if (window.lucide) {
  lucide.createIcons();
}
</script>
```

### React

```jsx
import { useState } from 'react';
import { CheckCircle, AlertCircle, Info, Bell, BellOff, Settings } from 'lucide-react';
import './aural-ui.css';
import './dark.css'; // or your chosen theme

function NotificationCenter() {
  const [notifications, setNotifications] = useState([
    {
      id: 1,
      type: 'success',
      icon: 'check-circle',
      title: 'Build Successful',
      message: 'Your project built successfully with no errors',
      time: '5 minutes ago',
      read: false
    },
    {
      id: 2,
      type: 'info',
      icon: 'info',
      title: 'New Update Available',
      message: 'Version 2.0 is ready to install',
      time: '1 hour ago',
      read: false
    },
    {
      id: 3,
      type: 'default',
      icon: 'bell',
      title: 'Welcome to Aural UI',
      message: 'Get started with our component library',
      time: '2 days ago',
      read: true
    }
  ]);

  const unreadCount = notifications.filter(n => !n.read).length;

  const markAsRead = (id) => {
    setNotifications(prev =>
      prev.map(n => n.id === id ? { ...n, read: true } : n)
    );
  };

  const markAllAsRead = () => {
    setNotifications(prev => prev.map(n => ({ ...n, read: true })));
  };

  const getIcon = (iconName) => {
    const icons = {
      'check-circle': CheckCircle,
      'alert-circle': AlertCircle,
      'info': Info,
      'bell': Bell
    };
    return icons[iconName] || Bell;
  };

  return (
    <div className="aural-notification-center">
      <div className="aural-notification-center__header">
        <h3 className="aural-notification-center__title">Notifications</h3>
        {unreadCount > 0 && (
          <span className="badge badge-primary">{unreadCount} new</span>
        )}
        <button className="btn btn-ghost btn-sm" onClick={markAllAsRead}>
          Mark all read
        </button>
      </div>

      <div className="aural-notification-center__list">
        {notifications.length === 0 ? (
          <div className="empty-state">
            <div className="empty-state-icon">
              <BellOff size={40} />
            </div>
            <h3 className="empty-state-title">No notifications</h3>
            <p className="empty-state-description">You're all caught up!</p>
          </div>
        ) : (
          notifications.map(notification => {
            const Icon = getIcon(notification.icon);
            return (
              <button
                key={notification.id}
                className={`aural-notification-center__item ${
                  !notification.read ? 'aural-notification-center__item--unread' : ''
                } ${
                  notification.type !== 'default'
                    ? `aural-notification-center__item--${notification.type}`
                    : ''
                }`}
                onClick={() => markAsRead(notification.id)}
              >
                <div className="aural-notification-center__item-icon">
                  <Icon size={20} />
                </div>
                <div className="aural-notification-center__item-content">
                  <div className="aural-notification-center__item-title">
                    {notification.title}
                  </div>
                  <div className="aural-notification-center__item-message">
                    {notification.message}
                  </div>
                  <div className="aural-notification-center__item-time">
                    {notification.time}
                  </div>
                </div>
                {!notification.read && (
                  <div className="aural-notification-center__item-dot" />
                )}
              </button>
            );
          })
        )}
      </div>

      <div className="aural-notification-center__footer">
        <a href="#" className="aural-notification-center__footer-link">
          View all notifications
        </a>
      </div>
    </div>
  );
}

export default NotificationCenter;
```

### Vue 3

```vue
<template>
  <div class="aural-notification-center">
    <div class="aural-notification-center__header">
      <h3 class="aural-notification-center__title">Notifications</h3>
      <span v-if="unreadCount > 0" class="badge badge-primary">
        {{ unreadCount }} new
      </span>
      <button class="btn btn-ghost btn-sm" @click="markAllAsRead">
        Mark all read
      </button>
    </div>

    <div class="aural-notification-center__list">
      <div v-if="notifications.length === 0" class="empty-state">
        <div class="empty-state-icon">
          <BellOff :size="40" />
        </div>
        <h3 class="empty-state-title">No notifications</h3>
        <p class="empty-state-description">You're all caught up!</p>
      </div>

      <button
        v-for="notification in notifications"
        :key="notification.id"
        :class="[
          'aural-notification-center__item',
          { 'aural-notification-center__item--unread': !notification.read },
          notification.type !== 'default'
            ? `aural-notification-center__item--${notification.type}`
            : ''
        ]"
        @click="markAsRead(notification.id)"
      >
        <div class="aural-notification-center__item-icon">
          <component :is="getIcon(notification.icon)" :size="20" />
        </div>
        <div class="aural-notification-center__item-content">
          <div class="aural-notification-center__item-title">
            {{ notification.title }}
          </div>
          <div class="aural-notification-center__item-message">
            {{ notification.message }}
          </div>
          <div class="aural-notification-center__item-time">
            {{ notification.time }}
          </div>
        </div>
        <div
          v-if="!notification.read"
          class="aural-notification-center__item-dot"
        />
      </button>
    </div>

    <div class="aural-notification-center__footer">
      <a href="#" class="aural-notification-center__footer-link">
        View all notifications
      </a>
    </div>
  </div>
</template>

<script setup>
import { ref, computed } from 'vue';
import { CheckCircle, AlertCircle, Info, Bell, BellOff } from 'lucide-vue-next';

const notifications = ref([
  {
    id: 1,
    type: 'success',
    icon: 'check-circle',
    title: 'Build Successful',
    message: 'Your project built successfully',
    time: '5 minutes ago',
    read: false
  },
  {
    id: 2,
    type: 'info',
    icon: 'info',
    title: 'New Update Available',
    message: 'Version 2.0 is ready to install',
    time: '1 hour ago',
    read: false
  },
  {
    id: 3,
    type: 'default',
    icon: 'bell',
    title: 'Welcome to Aural UI',
    message: 'Get started with our component library',
    time: '2 days ago',
    read: true
  }
]);

const unreadCount = computed(() =>
  notifications.value.filter(n => !n.read).length
);

const markAsRead = (id) => {
  const notification = notifications.value.find(n => n.id === id);
  if (notification) {
    notification.read = true;
  }
};

const markAllAsRead = () => {
  notifications.value.forEach(n => n.read = true);
};

const getIcon = (iconName) => {
  const icons = {
    'check-circle': CheckCircle,
    'alert-circle': AlertCircle,
    'info': Info,
    'bell': Bell
  };
  return icons[iconName] || Bell;
};
</script>
```

### Svelte

```svelte
<script>
  import { writable, derived } from 'svelte/store';
  import { CheckCircle, AlertCircle, Info, Bell, BellOff } from 'lucide-svelte';

  const notifications = writable([
    {
      id: 1,
      type: 'success',
      icon: 'check-circle',
      title: 'Build Successful',
      message: 'Your project built successfully',
      time: '5 minutes ago',
      read: false
    },
    {
      id: 2,
      type: 'info',
      icon: 'info',
      title: 'New Update Available',
      message: 'Version 2.0 is ready to install',
      time: '1 hour ago',
      read: false
    },
    {
      id: 3,
      type: 'default',
      icon: 'bell',
      title: 'Welcome to Aural UI',
      message: 'Get started with our component library',
      time: '2 days ago',
      read: true
    }
  ]);

  const unreadCount = derived(
    notifications,
    $notifications => $notifications.filter(n => !n.read).length
  );

  function markAsRead(id) {
    notifications.update(list =>
      list.map(n => n.id === id ? { ...n, read: true } : n)
    );
  }

  function markAllAsRead() {
    notifications.update(list =>
      list.map(n => ({ ...n, read: true }))
    );
  }

  function getIcon(iconName) {
    const icons = {
      'check-circle': CheckCircle,
      'alert-circle': AlertCircle,
      'info': Info,
      'bell': Bell
    };
    return icons[iconName] || Bell;
  }
</script>

<div class="aural-notification-center">
  <div class="aural-notification-center__header">
    <h3 class="aural-notification-center__title">Notifications</h3>
    {#if $unreadCount > 0}
      <span class="badge badge-primary">{$unreadCount} new</span>
    {/if}
    <button class="btn btn-ghost btn-sm" on:click={markAllAsRead}>
      Mark all read
    </button>
  </div>

  <div class="aural-notification-center__list">
    {#if $notifications.length === 0}
      <div class="empty-state">
        <div class="empty-state-icon">
          <BellOff size={40} />
        </div>
        <h3 class="empty-state-title">No notifications</h3>
        <p class="empty-state-description">You're all caught up!</p>
      </div>
    {:else}
      {#each $notifications as notification (notification.id)}
        <button
          class="aural-notification-center__item"
          class:aural-notification-center__item--unread={!notification.read}
          class:aural-notification-center__item--{notification.type}={notification.type !== 'default'}
          on:click={() => markAsRead(notification.id)}
        >
          <div class="aural-notification-center__item-icon">
            <svelte:component this={getIcon(notification.icon)} size={20} />
          </div>
          <div class="aural-notification-center__item-content">
            <div class="aural-notification-center__item-title">
              {notification.title}
            </div>
            <div class="aural-notification-center__item-message">
              {notification.message}
            </div>
            <div class="aural-notification-center__item-time">
              {notification.time}
            </div>
          </div>
          {#if !notification.read}
            <div class="aural-notification-center__item-dot" />
          {/if}
        </button>
      {/each}
    {/if}
  </div>

  <div class="aural-notification-center__footer">
    <a href="#" class="aural-notification-center__footer-link">
      View all notifications
    </a>
  </div>
</div>
```

---

## With Unread Indicator

Show a badge with the count of unread notifications.

<Canvas of={NotificationCenterStories.WithUnreadIndicator} />

```html
<div class="aural-notification-center__header">
  <h3 class="aural-notification-center__title">Notifications</h3>
  <span class="badge badge-primary">3 new</span>
</div>
```

---

## With Avatars

Display user avatars for social notifications.

<Canvas of={NotificationCenterStories.WithAvatars} />

```html
<button class="aural-notification-center__item aural-notification-center__item--unread">
  <div class="aural-notification-center__item-icon">
    <img src="avatar.jpg" alt="User" style="width: 32px; height: 32px; border-radius: 50%;">
  </div>
  <div class="aural-notification-center__item-content">
    <div class="aural-notification-center__item-title">Sarah commented on your post</div>
    <div class="aural-notification-center__item-message">"Great work on the new design!"</div>
    <div class="aural-notification-center__item-time">5 minutes ago</div>
  </div>
  <div class="aural-notification-center__item-dot"></div>
</button>
```

---

## With Action Buttons

Add inline action buttons for interactive notifications.

<Canvas of={NotificationCenterStories.WithActionButtons} />

```html
<div class="aural-notification-center__item aural-notification-center__item--unread" style="flex-direction: column; align-items: flex-start;">
  <div style="display: flex; width: 100%; align-items: flex-start;">
    <div class="aural-notification-center__item-icon">
      <img src="avatar.jpg" alt="User">
    </div>
    <div class="aural-notification-center__item-content">
      <div class="aural-notification-center__item-title">Team invitation</div>
      <div class="aural-notification-center__item-message">Sarah invited you to join "Design Team"</div>
      <div class="aural-notification-center__item-time">Just now</div>
    </div>
    <div class="aural-notification-center__item-dot"></div>
  </div>
  <div style="display: flex; gap: var(--space-2); margin-left: 44px; margin-top: var(--space-2);">
    <button class="btn btn-primary btn-sm">Accept</button>
    <button class="btn btn-ghost btn-sm">Decline</button>
  </div>
</div>
```

---

## Grouped by Date

Organize notifications into time-based groups.

<Canvas of={NotificationCenterStories.GroupedByDate} />

```html
<div class="aural-notification-center">
  <div class="aural-notification-center__header">
    <h3 class="aural-notification-center__title">Activity</h3>
  </div>

  <!-- Today -->
  <div style="padding: var(--space-2) var(--space-4); font-size: var(--text-xs); font-weight: var(--font-semibold); color: var(--color-text-tertiary); text-transform: uppercase;">
    Today
  </div>
  <div class="aural-notification-center__list">
    <!-- Today's notifications -->
  </div>

  <!-- Yesterday -->
  <div style="padding: var(--space-2) var(--space-4); font-size: var(--text-xs); font-weight: var(--font-semibold); color: var(--color-text-tertiary); text-transform: uppercase;">
    Yesterday
  </div>
  <div class="aural-notification-center__list">
    <!-- Yesterday's notifications -->
  </div>
</div>
```

---

## Different Notification Types

Use color-coded types to indicate notification category.

<Canvas of={NotificationCenterStories.DifferentTypes} />

### Notification Types:

- **Mention** (`info`): User mentions and tags
- **Like** (`success`): Positive interactions
- **Comment** (`info`): New comments and replies
- **System** (`warning`): System updates and maintenance

```html
<!-- Mention -->
<button class="aural-notification-center__item aural-notification-center__item--unread aural-notification-center__item--info">
  <div class="aural-notification-center__item-icon">
    <i data-lucide="at-sign"></i>
  </div>
  ...
</button>

<!-- Like -->
<button class="aural-notification-center__item aural-notification-center__item--unread aural-notification-center__item--success">
  <div class="aural-notification-center__item-icon">
    <i data-lucide="heart"></i>
  </div>
  ...
</button>
```

---

## Empty State

Show a friendly message when there are no notifications.

<Canvas of={NotificationCenterStories.EmptyState} />

```html
<div class="aural-notification-center__list">
  <div class="empty-state">
    <div class="empty-state-icon">
      <i data-lucide="bell-off"></i>
    </div>
    <h3 class="empty-state-title">No notifications</h3>
    <p class="empty-state-description">You're all caught up!</p>
  </div>
</div>
```

---

## Mark All as Read

Provide a quick way to mark all notifications as read.

<Canvas of={NotificationCenterStories.MarkAllAsRead} />

```javascript
function markAllAsRead() {
  const unreadItems = document.querySelectorAll('.aural-notification-center__item--unread');

  unreadItems.forEach(item => {
    item.classList.remove('aural-notification-center__item--unread');
    const dot = item.querySelector('.aural-notification-center__item-dot');
    if (dot) {
      dot.remove();
    }
  });
}
```

---

## Load More Pattern

Implement pagination for large notification lists.

<Canvas of={NotificationCenterStories.LoadMorePattern} />

```html
<div class="aural-notification-center__footer">
  <button class="btn btn-ghost btn-sm" style="width: 100%; justify-content: center;" onclick="loadMoreNotifications()">
    <i data-lucide="chevron-down"></i>
    Load more notifications
  </button>
</div>
```

```javascript
async function loadMoreNotifications() {
  const button = document.querySelector('.load-more-button');
  button.disabled = true;
  button.innerHTML = '<span class="spinner"></span> Loading...';

  // Fetch more notifications
  const newNotifications = await fetchNotifications();

  // Append to list
  const list = document.querySelector('.aural-notification-center__list');
  list.insertAdjacentHTML('beforeend', renderNotifications(newNotifications));

  button.disabled = false;
  button.innerHTML = '<i data-lucide="chevron-down"></i> Load more notifications';
}
```

---

## Theme Comparison

See how the Notification Center looks across all 9 Aural UI themes:

<Canvas of={NotificationCenterStories.ThemeComparison} />

All notification styles maintain proper contrast and readability across all themes.

---

## Accessibility

### WCAG AAA Compliance

All notification implementations meet WCAG AAA standards:

- **Color Contrast**: 7:1+ contrast ratio for all text and icons
- **Keyboard Navigation**: Full keyboard support for all interactions
- **Screen Readers**: Proper ARIA attributes and semantic HTML
- **Focus Management**: Clear focus indicators and logical tab order

### Keyboard Navigation

- **Tab**: Navigate between notification items
- **Enter/Space**: Activate notification (mark as read, trigger action)
- **Arrow Keys**: Move between notifications (when focused)
- **Escape**: Close notification panel (if in popover/dropdown)

### Screen Reader Support

```html
<div class="aural-notification-center" role="region" aria-label="Notifications">
  <div class="aural-notification-center__header">
    <h3 class="aural-notification-center__title" id="notifications-title">
      Notifications
    </h3>
    <span class="badge badge-primary" aria-label="3 unread notifications">
      3 new
    </span>
  </div>

  <div class="aural-notification-center__list" aria-live="polite">
    <button
      class="aural-notification-center__item aural-notification-center__item--unread"
      aria-label="Unread: Build Successful, 5 minutes ago">
      <!-- Notification content -->
    </button>
  </div>
</div>
```

### Best Practices

**Do:**
- Use semantic HTML with proper ARIA attributes
- Provide clear, descriptive labels for screen readers
- Implement keyboard navigation
- Use `aria-live` for dynamic notification updates
- Include timestamp information
- Make action buttons clearly labeled

**Don't:**
- Rely only on color to convey information
- Auto-dismiss important notifications too quickly
- Use complex nested interactive elements
- Make notifications too small to tap on mobile
- Skip focus management in dropdowns

---

## API Reference

### CSS Classes

| Class | Description |
|-------|-------------|
| `.aural-notification-center` | Main container |
| `.aural-notification-center__header` | Header section |
| `.aural-notification-center__title` | Title text |
| `.aural-notification-center__list` | Notification list container |
| `.aural-notification-center__item` | Individual notification |
| `.aural-notification-center__item--unread` | Unread state modifier |
| `.aural-notification-center__item--success` | Success type modifier |
| `.aural-notification-center__item--error` | Error type modifier |
| `.aural-notification-center__item--warning` | Warning type modifier |
| `.aural-notification-center__item--info` | Info type modifier |
| `.aural-notification-center__item-icon` | Icon container |
| `.aural-notification-center__item-content` | Content container |
| `.aural-notification-center__item-title` | Notification title |
| `.aural-notification-center__item-message` | Notification message |
| `.aural-notification-center__item-time` | Timestamp |
| `.aural-notification-center__item-dot` | Unread indicator dot |
| `.aural-notification-center__footer` | Footer section |
| `.aural-notification-center__footer-link` | Footer link |

### ARIA Attributes

| Attribute | Purpose |
|-----------|---------|
| `role="region"` | Identifies notification center region |
| `aria-label="Notifications"` | Labels the notification center |
| `aria-live="polite"` | Announces new notifications to screen readers |
| `aria-label` | Provides accessible label for notification items |

### JavaScript Initialization

```javascript
// Initialize notification center (if using Aural UI JS)
if (window.Aural) {
  window.Aural.initNotificationCenter();
}

// Initialize Lucide icons
if (window.lucide) {
  lucide.createIcons();
}
```

---

## Related Components

- **Dropdown**: For displaying notification center in a popover
- **Badge**: For showing unread counts
- **Avatar**: For user profile images in notifications
- **Empty State**: For no notifications state
- **Toast**: For temporary, auto-dismissing notifications

---

## Common Patterns

### Notification Dropdown

```html
<div class="dropdown">
  <button class="btn btn-ghost btn-icon" aria-label="Notifications">
    <i data-lucide="bell"></i>
    <span class="badge badge-primary badge-dot"></span>
  </button>

  <div class="dropdown-menu dropdown-menu-end" style="width: 400px;">
    <div class="aural-notification-center">
      <!-- Notification center content -->
    </div>
  </div>
</div>
```

### Real-time Updates

```javascript
// Using WebSocket or Server-Sent Events
const eventSource = new EventSource('/api/notifications/stream');

eventSource.onmessage = (event) => {
  const notification = JSON.parse(event.data);
  addNotification(notification);

  // Update badge count
  updateUnreadCount();

  // Show toast for important notifications
  if (notification.priority === 'high') {
    showToast(notification);
  }
};
```

### Local Storage Persistence

```javascript
// Save read state to localStorage
function markAsRead(notificationId) {
  const readNotifications = JSON.parse(
    localStorage.getItem('readNotifications') || '[]'
  );

  readNotifications.push(notificationId);
  localStorage.setItem('readNotifications', JSON.stringify(readNotifications));

  // Update UI
  updateNotificationUI(notificationId);
}

// Load read state on init
function loadReadState() {
  const readNotifications = JSON.parse(
    localStorage.getItem('readNotifications') || '[]'
  );

  readNotifications.forEach(id => {
    markNotificationAsRead(id);
  });
}
```

### Infinite Scroll

```javascript
function setupInfiniteScroll() {
  const list = document.querySelector('.aural-notification-center__list');

  list.addEventListener('scroll', async () => {
    if (list.scrollTop + list.clientHeight >= list.scrollHeight - 50) {
      await loadMoreNotifications();
    }
  });
}
```
